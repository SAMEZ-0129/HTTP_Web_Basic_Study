# 인터넷 네트워크

## 인터넷 통신
인터넷 상에서 컴퓨터가 통신하는 방법: 클라이언트 -> 서버 / 서버 -> 클라이언트
클라이언트는 노드를 통해 서버로 통신이 이루어진다.
이 때 통신이 이루어지는 방법/규칙을 **IP(Internet Protocol)** 이라고 한다.

## IP(인터넷 프로토콜)
IP주소 부여: 클라이언트, 서버 각각 IP주소가 부여된다.

IP의 역할: 
- 지정한 IP 주소(IP Address)에 데이터를 전달한다.
- 패킷(Packet)이라는 통신 단위로 전달한다.
IP 패킷 정보: 출발지 IP, 목적지IP, 전달 메시지...등
클라이언트에서 정보가 담긴 패킷을 전달하면 노드에서 패킷에 있는 내용을 이해하고 노드들끼리 던지면서 메시지가 이동한다.

클라이언트에서도 메시지를 받으면 동일하게 패킷으로 노르를 통해 응답을 전달한다.

IP 프로토콜의 한계
- 비연결성: 패킷을 받을 대상이 없거나 서비스 불능 상태여도 패킷은 전송된다
- 비신뢰성: 중간에 패킷이 사라지면? -> 소실되어도 알 수 없음, 패킷이 순서대로 안오면? -> 
- 프로그램 구분: 같은 IP를 사용하는 서버에서 통신하는 애플리케이션이 둘 이상이면 어떻게 구분하지?

상기와 같은 문제를 해결방안 --> TCP UDP

## TCP/UDP
인터넷 프로토콜 스택의 4계층
- 어플리케이션 계층[HTTP,FTP]
- 전송 계층[TCP, UDP]
- 인터넷 계층[IP]
- 네트워크 인터페이스 계층

TCP 특징: 전송 제어 프로토콜(Transmission Control Protocol)
- 연결지향: TCP 3 way handshake(가상 연결) -> 상대방과 연결이 되는지 확인하는 절차
1. SYN(Syncronize): 클라이언트 -> 서버로 연결 전송
2. SYM + ACK(Acknowledge): 서버 -> 클라이언트로 연결 확인 답장
3. ACK: 클라이언트 -> 서버로 연결 가능에 대한 답변 확인. (요즘에는 이 과정에서 데이터는 같이 전송될 수 있다)
4. 데이터 전송
위 과정을 통해 양쪽이 연결이 되었다고 논리적으로 이해한다. 실제 중간에 연결되는 과정에는 수많은 노드들을 통해 전송되며, 해당 노드들은 연결 유무에 대한 판단을 할 수 없다. 
- 데이터 전달 보증 -> 전달하려는 데이터가 온전히 전달 되었는지 확인(누락되면 알 수 있다)
1. 클라이언트 -> 서버로 데이터를 전달함
2. 서버 -> 클라이언트로 데이터 잘 받았다는 응답 줌. (응답이 없을 경우 데이터가 전달되지 않았을 가능성이 있는 것)
- 순서 보장
1. 클라이언트 -> 서버로 1,2,3순서로 패킷 전송 / 서버에서 1,3,2 순서로 패킷이 도착함
2. 서버 -> 클라이언트로 패킷 2번에서 전달하라고 응답함 (내부 로직에 따라 차이 있을 수 있음, 기본적인 이론상 이렇게 동작)

UDP 특징: 사용자 데이터그램 프로토콜(User Datagram Protocol)
- TCP와 같은 계층에서 동작, 기능이 많지 않음
- 내 IP로 여러 애플리케이션의 패킷이 전달될 때, 어떤 애플리케이션의 패킷인지 구분해 주는 역할 => 포트(PORT)
- IP와 거의 같다 + PORT + 체크섬(데이터 검증)
- 하얀 도화지에 비유한다(기능이 거의 없음) = TCP는 이미 전세계적으로 많이 사용되는 프로토콜이기에 내 맘대로 최적화하거나 변경하기 매우 어렵다. 그러기에 최적화 및 기능에 대한 추가를 원하면 UDP를 만지면 되는 것.
- 신뢰할 수 있는 프로토콜
- 현재는 대부분 TCP 사용

## PORT
IP는 출빌/목적지 서버를 찾는 용도, PORT는 각각의 애플리케이션을 구분시켜 주는 역할이라고 생각하면 쉽다
둘을 합쳐서 편하게 TCP/IP라고 부른다 (출발지 IP, 출발지 PORT, 목적지 IP, 목적지 PORT, 데이터...등)
IP: 아파트 / PORT: 몇동 몇호
포트는 0 ~ 65535까지 할당 가능
0 ~ 1023은 잘 알려진 포트, 사용하지 않는 것이 좋음
- FTP: 20,21
- TELNET: 23
- HTTP: 80
- HTTPS: 443

## DNS(Domain Name System)
IP는 기억하기 어렵고, IP주소가 변경되면 해당 주소를 찾기 힘들다. 그래서 사용하는 것이 도메인 이름 = DNS
쉽게 전화번호부같은 역할, 도메인명을 IP주소로 변환해줌

클라이언트 / DNS서버 / 서버
클라 -> DNS 서버로 google.com의 IP 요청
DNS 서버에서 google.com의 IP주소 200.200.200.2를 클라이언트로 전달
클라이언트는 해당 IP 주소로 연결 > 구글 서버에 연결

# 인터넷 네트워크 정리
- 인터넷 통신: 복잡한 인터넷망을 통해 메시지를 전달하기 위해서 IP를사용한다
- IP: 단순 전송을 위한 프로토콜이기에 여러가지 문제점이 존재한다
- TCP,UDP: 전송 순서, 데이터 무결성, 연결 보증...등 여러 문제점을 해결하기 위해 사용한다
- PORT: 같은 IP 안에서 동작하는 애플리케이션을 구분하기 위해서 사용한다
- DNS: IP는 변하기 쉽고 외우기 어렵기 때문에 사용하는 기능이다
